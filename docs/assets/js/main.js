"use strict";const inputSearch=document.querySelector(".js_inputSearch"),btnSearch=document.querySelector(".js_btnSearch"),btnReset=document.querySelector(".js_btnReset"),resultSearchSeries=document.querySelector(".js_resultSearchSeries"),resultSeriesFav=document.querySelector(".js_resultSeriesFav"),trashFav=document.querySelector(".js_trash");inputSearch.value="sailor";let data=[],dataFav=[];function handleButtonSearch(){const e=inputSearch.value;fetch(`https://api.jikan.moe/v3/search/anime?q=${e}&limit=6`).then(e=>e.json()).then(e=>{console.log(e),data=e.results,renderSerie()})}function renderSerie(){resultSearchSeries.innerHTML="";let e="";for(const a of data){let t=a.image_url;null===t&&(t="https://via.placeholder.com/210x295/ffffff/666666/?text=TV");let r="",n="";-1!==dataFav.findIndex(e=>e.mal_id===a.mal_id)&&(r="searchResultSelected",n=' <img class="flameIcon" src="./assets/images/flame.png" />'),e+=`<div class="cardResult js_cardResult ${r}" data-id="${a.mal_id}">${n}<img class="cardResult__img " src="${t}" alt="${a.title}"/>`,e+=`<h3 class="cardResult__title">${a.title}</h3></div>`}resultSearchSeries.innerHTML+=e;const a=document.querySelectorAll(".js_cardResult");for(const e of a)e.addEventListener("click",handleSerieFav)}function handleSerieFav(e){const a=parseInt(e.currentTarget.dataset.id),t=dataFav.findIndex(e=>e.mal_id===a);-1===t?addSerieFav(a):(dataFav.splice(t,1),setFavorite()),renderFav()}function addSerieFav(e){const a=data.find(a=>a.mal_id===e);dataFav.push(a),setFavorite(),console.log(dataFav),renderFav()}function handleRemoveSerie(e){const a=parseInt(e.currentTarget.dataset.id);console.log(a);const t=dataFav.findIndex(e=>e.mal_id===a);dataFav.splice(t,1),setFavorite(),renderFav()}function renderFav(){let e="";console.log(dataFav);for(const a of dataFav){e+='<div class="cardFav">';let t=a.image_url;null===t&&(t="https://via.placeholder.com/210x295/ffffff/666666/?text=TV"),e+=`<img class="cardFav__img  js_imgResult" data-id="${a.mal_id}" src="${a.image_url}" alt="${a.title}"/>`,e+=`<h3 class="cardFav__titleFav">${a.title}</h3><i class="far fa-times-circle js_iconX cardFav__iconX" data-id=${a.mal_id}></i></div>`}resultSeriesFav.innerHTML=e;const a=document.querySelectorAll(".js_iconX");for(const e of a)e.addEventListener("click",handleRemoveSerie);renderSerie()}function setFavorite(){localStorage.setItem("dataFav",JSON.stringify(dataFav))}function getFavorite(){const e=localStorage.getItem("dataFav");console.log(e),null!==e&&(dataFav=JSON.parse(localStorage.getItem("dataFav")),renderFav())}function handleResetFav(){dataFav=[],renderFav(),setFavorite()}getFavorite(),btnSearch.addEventListener("click",handleButtonSearch),trashFav.addEventListener("click",handleResetFav),btnSearch.click();